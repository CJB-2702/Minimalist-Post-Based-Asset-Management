{% if active_limitations %}
<!-- Work Order Specific Capability Limitations Card -->
<div class="card mb-4 border-warning" style="background-color: #fff8e1;">
    <div class="card-header bg-warning bg-opacity-10">
        <h5 class="mb-0">
            <i class="bi bi-exclamation-diamond text-warning"></i> Work Order Specific Capability Limitations
        </h5>
    </div>
    <div class="card-body">
        {% for limitation in active_limitations %}
        <div class="mb-3 pb-3 {% if not loop.last %}border-bottom{% endif %}">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <div class="flex-grow-1">
                    <span class="badge bg-warning text-dark me-2">{{ limitation.status }}</span>
                    <span class="badge bg-danger">ACTIVE</span>
                </div>
                <button type="button" class="btn btn-sm btn-success" data-bs-toggle="modal" data-bs-target="#closeLimitationModal">
                    <i class="bi bi-check-circle"></i> Close Limitation
                </button>
            </div>
            {% if limitation.limitation_description %}
            <p class="mb-2"><strong>Limitation:</strong> {{ limitation.limitation_description }}</p>
            {% endif %}
            {% if limitation.temporary_modifications %}
            <div class="alert alert-info py-2 px-3 mb-2">
                <small><strong><i class="bi bi-tools"></i> Temporary Modifications:</strong> {{ limitation.temporary_modifications }}</small>
            </div>
            {% endif %}
            {% if limitation.start_time %}
            <small class="text-muted">
                <i class="bi bi-calendar"></i> Started: {{ limitation.start_time.strftime('%Y-%m-%d %H:%M') }}
            </small>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
