{% extends "base.html" %}

{% block title %}Blocked Status - {{ delay.mission_capability_status or 'N/A' }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>Blocked Status: {{ delay.mission_capability_status or 'N/A' }}</h1>
            <div>
                <a href="{{ url_for('blockers.list') }}" class="btn btn-secondary">Back to List</a>
                <a href="{{ url_for('blockers.edit', delay_id=delay.id) }}" class="btn btn-warning">Edit</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Blocked Status Details</h5>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-4">ID:</dt>
                    <dd class="col-sm-8">{{ delay.id }}</dd>

                    <dt class="col-sm-4">Type:</dt>
                    <dd class="col-sm-8">{{ delay.mission_capability_status or 'N/A' }}</dd>

                    <dt class="col-sm-4">Reason:</dt>
                    <dd class="col-sm-8">{{ delay.reason or 'N/A' }}</dd>

                    <dt class="col-sm-4">Start Date:</dt>
                    <dd class="col-sm-8">{{ delay.start_date.strftime('%Y-%m-%d %H:%M') if delay.start_date else 'N/A' }}</dd>

                    <dt class="col-sm-4">End Date:</dt>
                    <dd class="col-sm-8">{{ delay.end_date.strftime('%Y-%m-%d %H:%M') if delay.end_date else 'Not Resolved' }}</dd>

                    <dt class="col-sm-4">Duration:</dt>
                    <dd class="col-sm-8">{{ '%.2f hours' % delay.duration_hours if delay.duration_hours else 'N/A' }}</dd>

                    <dt class="col-sm-4">Billable Hours:</dt>
                    <dd class="col-sm-8">{{ delay.billable_hours or 'N/A' }}</dd>

                    <dt class="col-sm-4">Status:</dt>
                    <dd class="col-sm-8">
                        <span class="badge bg-{{ 'success' if delay.is_resolved else 'warning' }}">
                            {{ 'Resolved' if delay.is_resolved else 'Active' }}
                        </span>
                    </dd>

                    <dt class="col-sm-4">Notes:</dt>
                    <dd class="col-sm-8">{{ delay.notes or 'N/A' }}</dd>
                </dl>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Quick Actions</h5>
            </div>
            <div class="card-body">
                {% if not delay.is_resolved %}
                <form method="POST" action="{{ url_for('blockers.resolve', delay_id=delay.id) }}">
                    <button type="submit" class="btn btn-success w-100">Resolve Blocked Status</button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

