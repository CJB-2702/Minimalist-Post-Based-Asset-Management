<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">
            <i class="bi bi-list-ul"></i> Events
            {% if filters.event_type or filters.user_id or filters.asset_id or filters.major_location_id %}
                <small class="text-muted">(Filtered)</small>
            {% endif %}
        </h5>
        <div class="btn-group btn-group-sm">
            <a href="{{ url_for('events.list', 
                               event_type=filters.event_type or '',
                               user_id=filters.user_id or '',
                               asset_id=filters.asset_id or '',
                               major_location_id=filters.major_location_id or '',
                               row_count=events.per_page) }}" 
               class="btn btn-outline-primary">
                <i class="bi bi-list"></i> View All
            </a>
        </div>
    </div>
    <div class="card-body p-0">
        {% if events.items %}
            <div class="list-group list-group-flush">
                {% for event in events.items %}
                <div class="list-group-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <div class="d-flex align-items-center mb-1">
                                <span class="badge bg-{{ 'primary' if event.event_type == 'Asset Created' else 'secondary' }} me-2">
                                    {{ event.event_type }}
                                </span>
                                <small class="text-muted">{{ event.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
                                {% if event.user %}
                                    <small class="text-muted ms-2">by {{ event.user.username }}</small>
                                {% endif %}
                            </div>
                            
                            <p class="mb-1">{{ event.description }}</p>
                            
                            <div class="small text-muted">
                                {% if event.asset %}
                                    <i class="bi bi-gear"></i> {{ event.asset.name }}
                                    {% if event.asset.serial_number %}({{ event.asset.serial_number }}){% endif %}
                                {% endif %}
                                {% if event.major_location %}
                                    {% if event.asset %} â€¢ {% endif %}
                                    <i class="bi bi-geo-alt"></i> {{ event.major_location.name }}
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="btn-group btn-group-sm ms-2">
                            <a href="{{ url_for('events.detail', event_id=event.id) }}" 
                               class="btn btn-outline-secondary" title="View Event">
                                <i class="bi bi-eye"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-4">
                <i class="bi bi-inbox text-muted fs-1"></i>
                <p class="text-muted mt-2">No events found matching your filters</p>
                <a href="{{ url_for('events.create') }}" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Create First Event
                </a>
            </div>
        {% endif %}
    </div>
    
    {% if events.items %}
    <div class="card-footer text-center">
        <small class="text-muted">
            Showing {{ events.items|length }} of {{ events.per_page }} events
            {% if filters.event_type or filters.user_id or filters.asset_id or filters.major_location_id %}
                (filtered)
            {% endif %}
        </small>
    </div>
    {% endif %}
</div> 