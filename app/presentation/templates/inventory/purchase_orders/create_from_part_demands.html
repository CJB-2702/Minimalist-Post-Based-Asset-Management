{% extends "base.html" %}

{% block title %}Purchasing Portal{% endblock %}

{% block extra_css %}
<style>
  .sticky-side {
    position: sticky;
    top: 1rem;
  }
  .table-xs td, .table-xs th {
    padding-top: .4rem;
    padding-bottom: .4rem;
  }
  /* HTMX loading indicator */
  .htmx-indicator {
    opacity: 0;
    transition: opacity 200ms ease-in;
  }
  .htmx-request .htmx-indicator {
    opacity: 1;
  }
  .htmx-request.htmx-indicator {
    opacity: 1;
  }
</style>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='inventory/utils/alerts.js') }}"></script>
<script>
  // Inject selected demand IDs for JavaScript
  window.SELECTED_DEMAND_IDS = [
    {% for d in selected_demands %}
      {{ d.id }}{% if not loop.last %},{% endif %}
    {% endfor %}
  ];
</script>
<script src="{{ url_for('inventory.create_po_from_part_demands_js') }}"></script>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h3 mb-1">
            <i class="bi bi-cart-plus text-primary"></i> Purchasing Portal
          </h1>
          <p class="text-muted mb-0">Search and select part demands, then confirm per-part pricing before submission.</p>
        </div>
        <div>
          <a href="{{ url_for('inventory.purchase_orders_index') }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to Purchase Orders
          </a>
        </div>
      </div>
    </div>
  </div>

  {% include 'inventory/purchase_orders/components/po_header_form.html' %}
  {% include 'inventory/purchase_orders/components/filters_section.html' %}
  {% include 'inventory/purchase_orders/components/parts_summary.html' %}
</div>
{% endblock %}










