{% if not selected_part_id or selected_part_id == 0 %}
<div class="list-group-item">
    <p class="text-muted mb-0"><i class="bi bi-arrow-up"></i> Select a queue item above to load matching maintenance events</p>
</div>
{% elif events|length == 0 %}
<div class="list-group-item">
    <p class="text-muted mb-0">No maintenance events with unlinked demands for this part.</p>
</div>
{% else %}
    {% for event in events %}
    <a href="#" class="list-group-item list-group-item-action event-item" 
       data-event-id="{{ event.event_id }}"
       hx-get="/inventory/issue-parts/api/event/{{ event.event_id }}/demands"
       hx-target="#event-demands-list"
       hx-vals="js:{part_id: getSelectedPartId(), inventory_id: getSelectedInventoryId()}">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h6 class="mb-1">{{ event.task_name }}</h6>
                <small class="text-muted">Asset: {{ event.asset_name or 'N/A' }}</small><br>
                <small class="text-muted">Start: {{ event.planned_start[:10] if event.planned_start else 'TBD' }}</small>
            </div>
            <div class="text-end">
                <span class="badge bg-warning">{{ event.status }}</span><br>
                <small class="text-muted">{{ event.demands|length }} demand{{ 's' if event.demands|length != 1 else '' }}</small>
            </div>
        </div>
    </a>
    {% endfor %}
{% endif %}

