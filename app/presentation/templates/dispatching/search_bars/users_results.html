<!-- User search results for HTMX -->
{% if error %}
<div class="alert alert-danger" role="alert">
    <i class="bi bi-exclamation-triangle"></i> Error: {{ error }}
</div>
{% elif users|length == 0 %}
<div class="list-group">
    <div class="list-group-item text-muted">
        <i class="bi bi-info-circle"></i> No users found{% if search %} for "{{ search }}"{% endif %}
    </div>
</div>
{% else %}
<div class="list-group">
    {% for user in users %}
    <button type="button" 
            class="list-group-item list-group-item-action {% if selected_user_id == user.id %}active{% endif %}"
            onclick="selectUser({{ user.id }}, '{{ user.username }}', '{{ user.first_name }} {{ user.last_name }}')"
            data-user-id="{{ user.id }}"
            data-username="{{ user.username }}"
            data-fullname="{{ user.first_name }} {{ user.last_name }}">
        <div class="d-flex w-100 justify-content-between">
            <h6 class="mb-1">
                <i class="bi bi-person"></i> {{ user.first_name }} {{ user.last_name }}
            </h6>
            <small>{{ user.username }}</small>
        </div>
        {% if user.email %}
        <small class="text-muted">{{ user.email }}</small>
        {% endif %}
    </button>
    {% endfor %}
</div>
{% if total_count > showing %}
<div class="mt-2 text-muted small">
    Showing {{ showing }} of {{ total_count }} results. Try refining your search.
</div>
{% endif %}
{% endif %}
